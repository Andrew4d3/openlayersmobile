<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>GeoRef</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
        <script src="js/lib/cordova-2.1.0.js"></script>
        <script src="js/lib/jquery.min.js"></script>
        <script src="js/lib/jquery.mobile-1.2.0.min.js"></script>
        <script src="js/lib/useful_functions.js"></script>
        <script src="js/main.js"></script>
        <script src="js/modelo.js"></script>
        <script src="js/controlador.js"></script>
        <style>
            dt{
                background-color: #ddd;
                font-weight: bold;
            }
        </style>
        <script>
            document.addEventListener("deviceready", onDeviceReady, false);
           
            function onDeviceReady(){
                init_db();
                if(sessionStorage.getItem('user')===""){
                    location.href="index.html";
                    //$.mobile.changePage('index.html');
                }

                $(document).ready(function(){
                    
                    document.addEventListener("backbutton", function(e){
                        if($.mobile.activePage.is('#home')){
                            e.preventDefault();
                            navigator.app.exitApp();
                        }
                        else {
                            $.mobile.changePage($('#home'));
                        }
                    }, false);

                    
                    if(sessionStorage.getItem('cargar_perfil')=="sitio"){
                        sessionStorage.removeItem('cargar_perfil');
                        sessionStorage.setItem('back_perfil-sitio',"home");
                        s = new Sitios();
                        s.consultar(sessionStorage.getItem('perfil_sitio'), cargarSitio);
                        $.mobile.changePage($('#perfil-sitio'));
                    }
                    else if(sessionStorage.getItem('cargar_perfil')=="checkpoint"){
                        sessionStorage.removeItem('cargar_perfil');
                        sessionStorage.setItem('back_perfil-checkpoint',"home");
                        c = new Checkpoints();
                        c.consultar(sessionStorage.getItem('perfil_checkpoint'), cargarCheckpoint);
                        $.mobile.changePage($('#perfil-checkpoint'));
                        
                    }
                    

                    user=sessionStorage.getItem('user');
                 
                    
                    $('#nuevo_sitio').live('pagebeforeshow',nuevoSitio);
                    
                    $('#check-in').live('pagebeforeshow',listarCheckins);
                    
                    $('#sitios').live('pagebeforeshow',listarSitios);
                    
                     $('#checkpoints').live('pagebeforeshow',listarCheckpoints);
                     
                     $('#alertas').live('pagebeforeshow',listarAlertas);
                     
                     
                    $("#cerrar").click(function(e){
                        e.stopImmediatePropagation();

                        localStorage.setItem('auto',"false");
                        sessionStorage.setItem('user',"");
                        location.href="index.html";
                        //$.mobile.changePage('index.html');
                        
                    });
                    
                   


                });
                
            }
            
            
        </script>
    </head>
    <body>
        
    <div data-role="page" id="home">

        <div data-role="header">
            <a href="#" id="cerrar" data-icon="delete">Cerrar Sesión</a>
            <h1></h1>
            <a href="#" data-icon="check">Configuración</a>
        </div>

        <ul data-role="listview">
            <li><a href="#nuevo_sitio">Nuevo Sitio</a></li>
            <li><a data-ajax="false" href="map.html#mappage">Mapa</a>
            <li><a href="#check-in">Hacer Check-in</a></li>
            <li><a href="#sitios">Sitios</a></li>
            <li><a href="#checkpoints">Checkpoints</a></li>
            <li><a href="#" >Sincronizar</a></li>
            <li><a href="#alertas">Alertas</a></li>

        </ul> 
   
    </div>
    
    <div data-role="page" id="alertas">
        <div data-role="header">
            <a href="#home" class="regresar" data-icon="back">Volver</a>
            <h1>Alertas</h1>
        </div>
        
        <div id="lista-alertas" data-role="collapsible-set">
            <!--
            <h3>Tienes 2 nuevas alertas</h3>
            <div data-role="collapsible" >
                <h3>Section 1</h3>
                <p>I'm the collapsible set content for section 1.</p>
            </div>

            <div data-role="collapsible">
                <h3>Section 2</h3>
                <p>I'm the collapsible set content for section 2.</p>
            </div>
            -->
        </div>
        
    </div>
        
    <div data-role="page" id="nuevo_sitio">
        <div data-role="header">
            <a href="#home" class="regresar" data-icon="back">Volver</a>
            <h1>Nuevo Sitio</h1>
        </div>
        
        <div id="sitio-container">
            <p>Se procedera a agregar el sitio donde se encuentra actualmente. El cual cuenta con las siguientes caracteristicas:</p>
            <div id="datos-coordenadas">
                
            </div>
     
        </div>
        
        <div data-role="footer" data-position="fixed" data-fullscreen="true" style="margin-top: 10px">
            
            <div data-role="navbar"  data-iconpos="right">
                    <ul>
                        <li><a href="#nuevo_sitio" class="actualizar" data-icon="refresh">Actualizar Posición</a></li>
                        <li><a href="#crear_sitio" class="continuar" data-icon="arrow-r">Continuar</a></li>
                            
                    </ul>
            </div>
           
	</div>
        
        
        
    </div> 

    <div data-role="page" id="crear_sitio">
        <div data-role="header">
            <a href="#home" class="regresar" data-icon="back">Cancelar</a>
            <h1>Nuevo Sitio</h1>
        </div>
        
        <form id="sitio_form" style="margin-top: 10px">
            <div data-role="fieldcontain">
                <label for="basic">Nombre:</label><input  type="text" maxlength="20" name="nombre" id="nombre" data-mini="true" placeholder="Campo requerido" title="El sitio a crear tiene que tener un nombre que lo identifique"/>
                <label for="basic">Descripcion:</label><input type="text" maxlength="600" name="descripcion" id="descripcion" data-mini="true" placeholder="Campo opcional"/>
            
                <label for="opciones-categorias" class="select">Categoria:</label>
                <select name="opciones-categorias" id="opciones-categorias">
                    <option value="null">(Sin Categoría)</option>
                    <option value="new">Otra (Crear categoría)</option>
                </select>
            
                <label for="basic">Fotografía (Opcional):</label>
                <a href="#" data-role="button" data-icon="star" data-mini="true" data-inline="true">Abrir Camara</a>
            
            </div>
            <input type="submit" value="Crear Sitio">
        </form>
        
        <div  id="nueva_categoria" data-role="popup">
            <div data-role="header">
                <h5>Nueva <br/>Categoría</h5>
            </div>
            <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
            <form style="margin:10px">
                <label for="basic">Nombre de categoría:</label><input  type="text" name="nombre" id="nombre_cat" data-mini="true" placeholder="Requerido" title="Un nombre para la categoría es requerido" maxlength="20"/>
                <label for="basic">Descripción de categoría:</label><input type="text" name="descripcion_cat" id="descripcion_cat" data-mini="true" placeholder="Opcional" maxlength="100"/>
                <input type="submit" value="Crear Categoria">
            </form>
        </div>
        
        
        
    </div>
    
        <div data-role="page" id="sitios">
            <div data-role="header">
                <a href="#home" class="regresar" data-icon="back">Regresar</a>
                <h1>Sitios</h1>
            </div>
            
            <div id="lista-sitios" data-role="collapsible-set">
                
            
            </div>
            
        </div>

        <div data-role="page" id="perfil-sitio">
            
            
            
            <div data-role="header">
                <a href="#" class="regresar" data-icon="back">Regresar</a>
                <h1>Perfil de Sitio</h1>
            </div>
            
            
            <dl title="Definition list">
                    <dt>Nombre</dt>
                    <dd id="sitio-nombre">I'm the definition text</dd>
                    <dt>Latitud</dt>
                    <dd id="sitio-latitud">I'm the definition text</dd>
                    <dt>Longitud</dt>
                    <dd id="sitio-longitud">I'm the definition text</dd>
                    <dt>Fecha y hora de creación</dt>
                    <dd id="sitio-fecha">I'm the definition text</dd>
                    <dt>Descripción</dt>
                    <dd id="sitio-descripcion">I'm the definition text</dd>
                    <dt>Categoria</dt>
                    <dd id="sitio-categoria">I'm the definition text</dd>
                    <dt>Imagen</dt>
                    <dd id="sitio-imagen">I'm the definition text</dd>
                    <dt>Mini-Mapa</dt>
                    <dd id="sitio-mapa">I'm the definition text</dd>
                    
            </dl>
            
            <div data-role="footer" data-position="fixed" data-fullscreen="true" style="margin-top: 10px">

                <div data-role="navbar"  data-iconpos="right">
                    <ul>
                        <li><a class="editar" href="#" >Editar</a></li>
                        <li><a href="map.html" data-ajax="false" class="irmapa">Ver en Mapa</a></li>
                        <li><a class="borrar" href="#" >Borrar</a></li>
                    </ul>
                </div>

            </div>
          
        </div>

        
        <div data-role="page" id="checkpoints">
            <div data-role="header">
                <a href="#home" class="regresar" data-icon="back" >Regresar</a>
                <h1>Checkpoints</h1>
            </div>
            
            <ul id="lista-checkpoints" data-role="listview">
                
            
            </ul>
            
        </div>
        
        <div data-role="page" id="perfil-checkpoint">
            
            
            
            <div data-role="header">
                <a href="#" class="regresar" data-icon="back">Regresar</a>
                <h1>Perfil de<br /> Checkpoint</h1>
            </div>
            
            
            <dl title="Definition list">
                    <dt>Nombre</dt>
                    <dd id="checkpoint-nombre">I'm the definition text</dd>
                    <dt>Latitud</dt>
                    <dd id="checkpoint-latitud">I'm the definition text</dd>
                    <dt>Longitud</dt>
                    <dd id="checkpoint-longitud">I'm the definition text</dd>
                    <dt>Fecha y hora de creación</dt>
                    <dd id="checkpoint-fecha">I'm the definition text</dd>
                    <dt>Descripción</dt>
                    <dd id="checkpoint-descripcion">I'm the definition text</dd>
                    <dt>Estado Actual</dt>
                    <dd id="checkpoint-status">I'm the definition text</dd>
                    <dt>Informacion para el usuario</dt>
                    <dd id="checkpoint-info">I'm the definition text</dd>
                    <dt>Imagen</dt>
                    <dd id="checkpoint-imagen">I'm the definition text</dd>
                    <dt>Mini-Mapa</dt>
                    <dd id="checkpoint-mapa">I'm the definition text</dd>
                    
            </dl>
            
            <div data-role="footer" data-position="fixed" data-fullscreen="true" style="margin-top: 10px">

                <div data-role="navbar"  data-iconpos="right">
                    <ul>
                        <li><a class="check-in" href="#" >Hacer Check-in</a></li>
                        <li><a href="map.html" data-ajax="false" class="irmapa">Ver en Mapa</a></li>
                        
                    </ul>
                </div>

            </div>
          
        </div>
        
        <div data-role="page" id="check-in">
            <div data-role="header">
                <a href="#home" class="regresar" data-icon="back">Regresar</a>
                <h1>Checkpoints<br/> Cercanos</h1>
            </div>
            
            <ul id="lista-check-in" data-role="listview">
                
            
            </ul>
            
        </div>
    
   
    </body>
</html>
